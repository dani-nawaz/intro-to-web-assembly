{"componentChunkName":"component---src-templates-lesson-template-js","path":"/wasm/stack","result":{"data":{"markdownRemark":{"html":"<h4 id=\"stacks\" style=\"position:relative;\"><a href=\"#stacks\" aria-label=\"stacks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Stacks</h4>\n<p>A stack is memory region where variables are stored and accessed by the running program. Once execution is complete the stack is cleared.</p>\n<blockquote>\n<p>While similar in concept, a Stack is data structure that stores information in Last In First Order (LIFO) and is not the as an execution stack.</p>\n</blockquote>\n<p>Web Assembly is stack based language so all operations read and write to the stack in a linear fashion.</p>\n<blockquote>\n<p>You've probably heard of the call stack in JavaScript which is a reserved portion of memory the interpreter uses to keep track of running functions.</p>\n</blockquote>\n<h4 id=\"opcodes\" style=\"position:relative;\"><a href=\"#opcodes\" aria-label=\"opcodes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>OpCodes</h4>\n<p>Opcodes (Operation Code) are readable computer instructions representing machine language instructions.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 672px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/intro-to-web-assembly/static/027948fff5c7689cc6e23adeea36e47b/30d16/opcodes.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABMklEQVQoz62R3UvCYBjFN7e5T93m3Jyby62JlpZBEPSJRDfdBEVYWUGYF4UVgRREV/3np71vQjYlErp44IVznpdzfg/DMAz+dTIcA6eUhW7wcL0sWm11prEaSegcmNByHKyigPa6hr19A1FNpjrLjr2NpoLRexV3zxWc9hwcd+1vccJ4eGRhOAowGPrY3NVxcu7g7SPETsegeiYz3gkXJVz2XYSxhFyeg+0I4Hl2KiFp4AcizAKPKJaxEEoo+yJUjUt7/8CF/V2fbMSQNAWLp8mWWgqaqypNml4i6Ta28siKLH2TiesyTfzDayafDR58XN2W0btx0b/3ULSFmQyfXgOK5yLxnV2X8PgSYDvNMK9zWFnTUGsolCM5kiBMMySXJey8yle6+nLiT/iTdvMznGM+AelG0t++RQ5dAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"example of opcodes with corresponding hex\"\n        title=\"example of opcodes with corresponding hex\"\n        src=\"/intro-to-web-assembly/static/027948fff5c7689cc6e23adeea36e47b/30d16/opcodes.png\"\n        srcset=\"/intro-to-web-assembly/static/027948fff5c7689cc6e23adeea36e47b/772e8/opcodes.png 200w,\n/intro-to-web-assembly/static/027948fff5c7689cc6e23adeea36e47b/e17e5/opcodes.png 400w,\n/intro-to-web-assembly/static/027948fff5c7689cc6e23adeea36e47b/30d16/opcodes.png 672w\"\n        sizes=\"(max-width: 672px) 100vw, 672px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a href=\"https://pengowray.github.io/wasm-ops/\">Here is an interactive table</a> of current Web Assembly OpCodes.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/intro-to-web-assembly/static/c9a9fb06258fab96e14057eebf1787f4/cb93d/opcode-table.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABUUlEQVQ4y4WTbYuDQAyE/f//ryCt34Sq1dZa32przfEERnJc4YRhd5PJbOImyeFwsNPpZGmaWpZldjwefV3X1f77tm3boS8Zx9Fut5u1bWvsu65zIAiwDcPga9/3Ds6v12vnvN/v/ZygCmGeZ5umycUIQuDxeFhVVXY+n3+haRrnEgf3fr97UsQmpIs6BIh5njsQEi6Xy47r9WrLsjifc1mWVte174lPPp+PO8kQ6FaAWFEUvpKFylc1cKgC4Gf1DCFxECES9c8Qk2C8VICL3QVljAHKBDyfTy8znpUlewCf1UsWUUGRqN+h/yafeNjl+yMokZhVFFTriC8fXHzsvWTdTFDMKhJlVyb6RRLfBfXKEsERS4nZx4vYw1VFikvobr1ofBQF65XVGvKp8fXiNDU2z/BbWwiICIwnIFh7ja3sPnpq6DivcW6/9Z1GTrMvwR89GTg9SGU+xgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"table of wasm opcodes\"\n        title=\"table of wasm opcodes\"\n        src=\"/intro-to-web-assembly/static/c9a9fb06258fab96e14057eebf1787f4/5a190/opcode-table.png\"\n        srcset=\"/intro-to-web-assembly/static/c9a9fb06258fab96e14057eebf1787f4/772e8/opcode-table.png 200w,\n/intro-to-web-assembly/static/c9a9fb06258fab96e14057eebf1787f4/e17e5/opcode-table.png 400w,\n/intro-to-web-assembly/static/c9a9fb06258fab96e14057eebf1787f4/5a190/opcode-table.png 800w,\n/intro-to-web-assembly/static/c9a9fb06258fab96e14057eebf1787f4/c1b63/opcode-table.png 1200w,\n/intro-to-web-assembly/static/c9a9fb06258fab96e14057eebf1787f4/29007/opcode-table.png 1600w,\n/intro-to-web-assembly/static/c9a9fb06258fab96e14057eebf1787f4/cb93d/opcode-table.png 2304w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>OpCodes are specific to the data type. We're going to stick with 32-bit integers for this course.</p>\n<table>\n<thead>\n<tr>\n<th>Type</th>\n<th>Name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>i32</td>\n<td>32-bit integer</td>\n</tr>\n<tr>\n<td>i64</td>\n<td>64-bit integer</td>\n</tr>\n<tr>\n<td>f32</td>\n<td>32-bit float</td>\n</tr>\n<tr>\n<td>f64</td>\n<td>64-bit float</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"instruction-stack\" style=\"position:relative;\"><a href=\"#instruction-stack\" aria-label=\"instruction stack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Instruction stack</h4>\n<p>All Web Assembly instructions read and write from the stack. Think of the stack like a JavaScript array where values are pushed and popped to and from the stack. For example,  <code class=\"language-text\">i32.mul</code> pops two <code class=\"language-text\">i32</code> values from the stack and multiplies them together.</p>\n<div class=\"gatsby-highlight\" data-language=\"wasm\"><pre class=\"language-wasm\"><code class=\"language-wasm\"><span class=\"token keyword\">get_local</span> <span class=\"token number\">0</span> <span class=\"token comment\">;; push first parameter onto the stack</span>\n<span class=\"token keyword\">get_local</span> <span class=\"token number\">1</span> <span class=\"token comment\">;; push second parameter onto the stack</span>\n<span class=\"token keyword\">i32<span class=\"token punctuation\">.</span>mul</span> <span class=\"token comment\">;; pop both values and execute operation</span></code></pre></div>\n<p>To push a value onto the stack use the <code class=\"language-text\">i32.const</code> instruction</p>\n<div class=\"gatsby-highlight\" data-language=\"wasm\"><pre class=\"language-wasm\"><code class=\"language-wasm\"><span class=\"token keyword\">i32<span class=\"token punctuation\">.</span>const</span> <span class=\"token number\">99</span> <span class=\"token comment\">;; push 99 onto the stack</span></code></pre></div>\n<h4 id=\"exercise\" style=\"position:relative;\"><a href=\"#exercise\" aria-label=\"exercise permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exercise</h4>\n<details>\n  <summary>Create a \"minusone\" function that takes an i32 and substracts 1</summary>\n<div class=\"gatsby-highlight\" data-language=\"wasm\"><pre class=\"language-wasm\"><code class=\"language-wasm\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">module</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">export</span> <span class=\"token string\">\"minusone\"</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">func</span> <span class=\"token variable\">$minusone</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">func</span> <span class=\"token variable\">$minusone</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">param</span> <span class=\"token variable\">$x</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">result</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">get_local</span> <span class=\"token variable\">$x</span>\n      <span class=\"token keyword\">i32<span class=\"token punctuation\">.</span>const</span> <span class=\"token number\">1</span>\n      <span class=\"token keyword\">i32<span class=\"token punctuation\">.</span>sub</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<iframe src=\"https://webassembly.studio/?embed&f=nv688an8wxd\" style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>\n</details>","frontmatter":{"path":"/wasm/stack","title":"Stack and OpCode","order":"2C","section":"Web Assembly","description":""}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"order":"5A","path":"/closing","title":"In closing"}}},{"node":{"frontmatter":{"order":"0A","path":"/intro","title":"Hello"}}},{"node":{"frontmatter":{"order":"3A","path":"/assembly-script","title":"What is AssemblyScript"}}},{"node":{"frontmatter":{"order":"0B","path":"/intro-to-wasm","title":"Introduction to Web Assembly"}}},{"node":{"frontmatter":{"order":"3G","path":"/assembly-script/imports","title":"Imports"}}},{"node":{"frontmatter":{"order":"3K","path":"/assembly-script/jsvwasm","title":"JS vs Wasm"}}},{"node":{"frontmatter":{"order":"3H","path":"/assembly-script/loader","title":"AssemblyScript Loader"}}},{"node":{"frontmatter":{"order":"3F","path":"/assembly-script/loading-browser","title":"Loading AssemblyScript - Browser"}}},{"node":{"frontmatter":{"order":"3E","path":"/assembly-script/loading-node","title":"Loading AssemblyScript - NodeJS"}}},{"node":{"frontmatter":{"order":"3J","path":"/assembly-script/memory","title":"Memory"}}},{"node":{"frontmatter":{"order":"3C","path":"/assembly-script/setup","title":"AssemblyScript Setup"}}},{"node":{"frontmatter":{"order":"3I","path":"/assembly-script/loader-usage","title":"Using the AssemblyScript loader"}}},{"node":{"frontmatter":{"order":"3D","path":"/assembly-script/writing","title":"Writing AssemblyScript"}}},{"node":{"frontmatter":{"order":"1C","path":"/low-level/binary-contd","title":"Binary continued"}}},{"node":{"frontmatter":{"order":"1B","path":"/low-level/binary","title":"Binary"}}},{"node":{"frontmatter":{"order":"1D","path":"/low-level/hex","title":"Hexadecimal"}}},{"node":{"frontmatter":{"order":"1G","path":"/low-level/memory","title":"Memory"}}},{"node":{"frontmatter":{"order":"1E","path":"/low-level/tostring","title":"The underrated .toString() method"}}},{"node":{"frontmatter":{"order":"1G","path":"/low-level/types","title":"Numeric types"}}},{"node":{"frontmatter":{"order":"2C","path":"/wasm/stack","title":"Stack and OpCode"}}},{"node":{"frontmatter":{"order":"2B","path":"/wasm/intro-contd","title":"Modules"}}},{"node":{"frontmatter":{"order":"2A","path":"/wasm/intro","title":"What is Web Assembly?"}}},{"node":{"frontmatter":{"order":"2D","path":"/wasm/writing","title":"Writing Web Assembly"}}}]}},"pageContext":{}},"staticQueryHashes":["2959687377"]}